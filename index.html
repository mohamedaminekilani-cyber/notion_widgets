<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø¢ÙŠØ© Ø§Ù„ÙŠÙˆÙ… â€” Ø§Ù„ÙƒØªØ§Ø¨ Ø§Ù„Ù…Ù‚Ø¯Ø³</title>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700;800&family=Cairo:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-light: #f8fafc;
      --card-light: #ffffff;
      --text-light: #1a202c;
      --text-secondary-light: #4a5568;
      --accent-light: #2c5282;
      --border-light: #e2e8f0;
      --quote-light: #cbd5e0;

      --bg-dark: #191919;
      --card-dark: #2d2d2d;
      --text-dark: #f1f5f9;
      --text-secondary-dark: #a0aec0;
      --accent-dark: #60a5fa;
      --border-dark: #444444;
      --quote-dark: #666666;
    }

    body {
      margin: 0;
      font-family: 'Cairo', 'Tajawal', 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 20px 10px;
      box-sizing: border-box;
      transition: background-color 0.3s ease;
    }

    .widget {
      width: 100%;
      max-width: 460px;
      height: 280px;
      background: var(--card);
      border-radius: 18px;
      box-shadow: 0 8px 28px rgba(0, 0, 0, 0.15);
      padding: 24px;
      text-align: right;
      direction: rtl;
      box-sizing: border-box;
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
    }

    .widget::before {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 6px;
      height: 100%;
      background: linear-gradient(to bottom, var(--accent), #3b82f6, #1d4ed8);
      border-radius: 0 16px 16px 0;
    }

    .header {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 12px;
      margin-bottom: 16px;
      color: var(--accent);
      font-weight: 800;
      font-size: 20px;
      letter-spacing: -0.5px;
    }

    .header svg {
      width: 22px;
      height: 22px;
      flex-shrink: 0;
    }

    .divider {
      height: 1px;
      background: linear-gradient(to right, transparent, var(--border), transparent);
      margin: 12px 0;
    }

    .verse-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 0 8px;
    }

    .verse-text {
      font-weight: 700;
      color: var(--text);
      margin: 0;
      hyphens: auto;
      word-break: break-word;
      font-feature-settings: "ss01", "ss02";
      text-align: center;
      font-size: 20px;
      line-height: 1.5;
      transition: font-size 0.3s ease;
    }

    .verse-ref {
      font-family: 'Tajawal', sans-serif;
      font-weight: 800;
      color: var(--text-secondary);
      margin-top: 16px;
      display: block;
      letter-spacing: -0.2px;
      font-size: 15px;
      text-align: center;
    }

    .decoration {
      position: relative;
      padding: 0 16px;
    }

    .decoration::before,
    .decoration::after {
      content: '×´';
      position: absolute;
      font-size: 36px;
      color: var(--quote);
      font-family: 'Cairo', serif;
      line-height: 1;
      opacity: 0.5;
    }

    .decoration::before {
      right: 0;
      top: -12px;
    }

    .decoration::after {
      left: 0;
      bottom: -20px;
      transform: scaleX(-1);
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 14px;
      gap: 12px;
    }

    .theme-toggle {
      display: flex;
      align-items: center;
      gap: 6px;
      background: var(--card);
      padding: 6px;
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    .theme-btn {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      background: transparent;
      color: var(--text-secondary);
      font-size: 13px;
      transition: all 0.2s ease;
    }

    .theme-btn.active {
      background: var(--accent);
      color: white;
      transform: scale(1.1);
    }

    .next-btn {
      background: linear-gradient(135deg, var(--accent), #3b82f6);
      color: white;
      border: none;
      border-radius: 12px;
      padding: 10px 18px;
      font-family: 'Tajawal', sans-serif;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 4px 10px rgba(59, 130, 246, 0.3);
      transition: all 0.25s ease;
    }

    .next-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 14px rgba(59, 130, 246, 0.4);
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    }

    .next-btn:active {
      transform: translateY(0);
      box-shadow: 0 3px 8px rgba(59, 130, 246, 0.35);
    }

    .next-btn svg {
      width: 16px;
      height: 16px;
    }

    /* Initial light mode */
    body {
      --bg: var(--bg-light);
      --card: var(--card-light);
      --text: var(--text-light);
      --text-secondary: var(--text-secondary-light);
      --accent: var(--accent-light);
      --border: var(--border-light);
      --quote: var(--quote-light);
    }

    body.dark-mode {
      --bg: var(--bg-dark);
      --card: var(--card-dark);
      --text: var(--text-dark);
      --text-secondary: var(--text-secondary-dark);
      --accent: var(--accent-dark);
      --border: var(--border-dark);
      --quote: var(--quote-dark);
    }
  </style>
</head>
<body>
  <div class="widget">
    <div class="header">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9l-7-7z"/>
        <path d="M11 13H9a2 2 0 0 1 0-4h2v4z"/>
        <path d="M15 13h-2a2 2 0 1 0 0 4h2v-4z"/>
      </svg>
      Ø¢ÙŠØ© Ø§Ù„ÙŠÙˆÙ…
    </div>
    <div class="divider"></div>
    <div class="verse-container">
      <div class="decoration">
        <div class="verse-text" id="verse-text">
          Ù„Ø£Ù†Ù‡ Ù‡ÙƒØ°Ø§ Ø£Ø­Ø¨ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø§Ù„Ù… Ø­ØªÙ‰ Ø¨Ø°Ù„ Ø§Ø¨Ù†Ù‡ Ø§Ù„ÙˆØ­ÙŠØ¯ØŒ Ù„ÙƒÙŠ Ù„Ø§ ÙŠÙ‡Ù„Ùƒ ÙƒÙ„ Ù…Ù† ÙŠØ¤Ù…Ù† Ø¨Ù‡ØŒ Ø¨Ù„ ØªÙƒÙˆÙ† Ù„Ù‡ Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø£Ø¨Ø¯ÙŠØ©.
        </div>
        <span class="verse-ref" id="verse-ref">ÙŠÙˆØ­Ù†Ø§ 3:16</span>
      </div>
    </div>
    <div class="controls">
      <div class="theme-toggle">
        <button class="theme-btn active" id="light-btn" title="ÙˆØ¶Ø¹ ÙØ§ØªØ­">â˜€ï¸</button>
        <button class="theme-btn" id="dark-btn" title="ÙˆØ¶Ø¹ Ø¯Ø§ÙƒÙ†">ğŸŒ™</button>
      </div>
      <button class="next-btn" id="next-btn">
        <span>Ø¢ÙŠØ© Ø¬Ø¯ÙŠØ¯Ø©</span>
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </button>
    </div>
  </div>

  <script>
    const verses = [
      { text: "Ø·ÙˆØ¨Ù‰ Ù„Ù„ÙÙ‚Ø±Ø§Ø¡ Ø¨Ø§Ù„Ø±ÙˆØ­ØŒ Ù„Ø£Ù† Ù„Ù‡Ù… Ù…Ù„ÙƒÙˆØª Ø§Ù„Ø³Ù…Ø§ÙˆØ§Øª.", ref: "Ù…ØªÙ‰ 5:3" },
      { text: "Ø·ÙˆØ¨Ù‰ Ù„Ù„Ø­Ø²Ø§Ù†Ù‰ØŒ Ù„Ø£Ù†Ù‡Ù… ÙŠÙØ¹Ø²Ù‘ÙˆÙ†.", ref: "Ù…ØªÙ‰ 5:4" },
      { text: "Ø·ÙˆØ¨Ù‰ Ù„Ù„ÙˆØ¯Ø¹Ø§Ø¡ØŒ Ù„Ø£Ù†Ù‡Ù… ÙŠØ±Ø«ÙˆÙ† Ø§Ù„Ø£Ø±Ø¶.", ref: "Ù…ØªÙ‰ 5:5" },
      { text: "Ø·ÙˆØ¨Ù‰ Ù„Ù„Ø¬ÙŠØ§Ø¹ ÙˆØ§Ù„Ø¹Ø·Ø§Ø´ Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø±ØŒ ÙØ¥Ù†Ù‡Ù… ÙŠØ´Ø¨Ø¹ÙˆÙ†.", ref: "Ù…ØªÙ‰ 5:6" },
      { text: "Ø·ÙˆØ¨Ù‰ Ù„Ù„Ø±Ø­Ù…Ø§Ø¡ØŒ ÙØ¥Ù†Ù‡Ù… ÙŠÙØ±Ø­Ù…ÙˆÙ†.", ref: "Ù…ØªÙ‰ 5:7" },
      { text: "Ø·ÙˆØ¨Ù‰ Ù„Ø£Ù†Ù‚ÙŠØ§Ø¡ Ø§Ù„Ù‚Ù„Ø¨ØŒ ÙØ¥Ù†Ù‡Ù… ÙŠØ¹Ø§ÙŠÙ†ÙˆÙ† Ø§Ù„Ù„Ù‡.", ref: "Ù…ØªÙ‰ 5:8" },
      { text: "Ø·ÙˆØ¨Ù‰ Ù„ØµØ§Ù†Ø¹ÙŠ Ø§Ù„Ø³Ù„Ø§Ù…ØŒ ÙØ¥Ù†Ù‡Ù… Ø£Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù„Ù‡ ÙŠÙØ¯Ø¹ÙˆÙ†.", ref: "Ù…ØªÙ‰ 5:9" },
      { text: "Ø·ÙˆØ¨Ù‰ Ù„Ù„Ù…Ø·Ø±ÙˆØ¯ÙŠÙ† Ù…Ù† Ø£Ø¬Ù„ Ø§Ù„Ø¨Ø±ØŒ ÙØ¥Ù† Ù„Ù‡Ù… Ù…Ù„ÙƒÙˆØª Ø§Ù„Ø³Ù…Ø§ÙˆØ§Øª.", ref: "Ù…ØªÙ‰ 5:10" },
      { text: "Ø£Ù†ØªÙ… Ù…Ù„Ø­ Ø§Ù„Ø£Ø±Ø¶... Ø£Ù†ØªÙ… Ù†ÙˆØ± Ø§Ù„Ø¹Ø§Ù„Ù….", ref: "Ù…ØªÙ‰ 5:13-14" },
      { text: "Ù„Ø§ ØªÙ‚Ù„Ù‚ÙˆØ§ Ø¥Ø°Ù‹Ø§ØŒ Ù‚Ø§Ø¦Ù„Ø§Ù‹: Ù…Ø§Ø°Ø§ Ù†Ø£ÙƒÙ„ØŸ Ø£Ùˆ Ù…Ø§Ø°Ø§ Ù†Ø´Ø±Ø¨ØŸ Ø£Ùˆ Ù…Ø§Ø°Ø§ Ù†Ù„Ø¨Ø³ØŸ", ref: "Ù…ØªÙ‰ 6:31" },
      { text: "Ø§Ø·Ù„Ø¨ÙˆØ§ Ø£ÙˆÙ„Ø§Ù‹ Ù…Ù„ÙƒÙˆØª Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø±Ù‡ØŒ ÙˆÙ‡Ø°Ù‡ ÙƒÙ„Ù‡Ø§ ØªÙØ²Ø§Ø¯ Ù„ÙƒÙ….", ref: "Ù…ØªÙ‰ 6:33" },
      { text: "Ù„Ø§ ØªØ°ÙƒØ±ÙˆØ§ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©ØŒ ÙˆÙ„Ø§ ØªØªÙÙƒØ±ÙˆØ§ ÙÙŠ Ø§Ù„Ø£Ù…ÙˆØ± Ø§Ù„Ø£ÙˆÙ„.", ref: "Ø¥Ø´Ø¹ÙŠØ§Ø¡ 43:18" },
      { text: "Ù‡Ø§ Ø£Ù†Ø§ Ø£ØµÙ†Ø¹ ÙƒÙ„ Ø´ÙŠØ¡ Ø¬Ø¯ÙŠØ¯Ù‹Ø§.", ref: "Ø±Ø¤ÙŠØ§ 21:5" },
      { text: "Ø§Ù„Ø±Ø¨ Ù†ÙˆØ±ÙŠ ÙˆØ®Ù„Ø§ØµÙŠØŒ Ù…Ù…Ù† Ø£Ø®Ø§ÙØŸ", ref: "Ù…Ø²Ù…ÙˆØ± 27:1" },
      { text: "Ø§Ù„Ø±Ø¨ Ø±Ø§Ø¹ÙŠÙ‘ ÙÙ„Ø§ ÙŠØ¹ÙˆØ²Ù†ÙŠ Ø´ÙŠØ¡.", ref: "Ù…Ø²Ù…ÙˆØ± 23:1" },
      { text: "Ø§Ø³ØªØ±ÙŠØ­ÙˆØ§ ÙˆØ§Ø¹Ù„Ù…ÙˆØ§ Ø£Ù†ÙŠ Ø£Ù†Ø§ Ø§Ù„Ù„Ù‡.", ref: "Ù…Ø²Ù…ÙˆØ± 46:10" },
      { text: "Ø£Ø«Ù‚ Ù„Ø£Ù†Ùƒ Ø£Ù†Øª Ù…Ø¹Ù‰. ÙŠØ¯Ùƒ ØªÙ‡Ø¯ÙŠÙ†ÙŠ ÙˆÙŠÙ…Ù†Ø§Ùƒ ØªÙ…Ø³Ùƒ Ø¨ÙŠ.", ref: "Ù…Ø²Ù…ÙˆØ± 139:10" },
      { text: "Ù„Ø§ ØªÙØ®ÙÙÙ’ØŒ Ù„Ø£Ù†ÙŠ Ù…Ø¹Ùƒ. Ù„Ø§ ØªÙØªÙÙ„ÙÙÙÙ‘ØªÙ’ØŒ Ù„Ø£Ù†ÙŠ Ø¥Ù„Ù‡Ùƒ.", ref: "Ø¥Ø´Ø¹ÙŠØ§Ø¡ 41:10" },
      { text: "Ù„Ø£Ù†Ù‡ Ù‡ÙƒØ°Ø§ Ø£Ø­Ø¨ Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø§Ù„Ù… Ø­ØªÙ‰ Ø¨Ø°Ù„ Ø§Ø¨Ù†Ù‡ Ø§Ù„ÙˆØ­ÙŠØ¯ØŒ Ù„ÙƒÙŠ Ù„Ø§ ÙŠÙ‡Ù„Ùƒ ÙƒÙ„ Ù…Ù† ÙŠØ¤Ù…Ù† Ø¨Ù‡ØŒ Ø¨Ù„ ØªÙƒÙˆÙ† Ù„Ù‡ Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø£Ø¨Ø¯ÙŠØ©.", ref: "ÙŠÙˆØ­Ù†Ø§ 3:16" },
      { text: "Ø§Ù„Ø°ÙŠ Ø¢Ù…Ù† ÙˆØ§Ø¹ØªÙ…Ø¯ ÙŠØ®Ù„ÙØµØŒ ÙˆØ§Ù„Ø°ÙŠ Ù„Ù… ÙŠØ¤Ù…Ù† ÙŠÙØ¯Ù†.", ref: "Ù…Ø±Ù‚Ø³ 16:16" },
      { text: "Ø¥ÙÙ†ÙÙ‘ ÙƒÙÙ„ÙÙ‘ Ù…ÙÙ†Ù’ ÙŠÙØ¯Ù’Ø¹ÙÙˆ Ø¨ÙØ§Ø³Ù’Ù…Ù Ø§Ù„Ø±ÙÙ‘Ø¨ÙÙ‘ ÙŠÙØ®Ù’Ù„ÙØµ.", ref: "Ø±ÙˆÙ…ÙŠØ© 10:13" },
      { text: "ÙˆØ£Ù…Ø§ Ù†Ø­Ù† ÙÙ†Ø­Ø¨ØŒ Ù„Ø£Ù†Ù‡ Ù‡Ùˆ Ø£Ø­Ø¨Ù†Ø§ Ø£ÙˆÙ„Ø§Ù‹.", ref: "1 ÙŠÙˆØ­Ù†Ø§ 4:19" },
      { text: "Ø¥Ù† Ø£Ø®Ø·Ø£ Ø¥Ù„ÙŠÙƒ Ø£Ø®ÙˆÙƒ ÙÙˆØ¨Ù‘Ø®Ù‡ØŒ ÙˆØ¥Ù† ØªØ§Ø¨ ÙØ§ØºÙØ± Ù„Ù‡.", ref: "Ù„ÙˆÙ‚Ø§ 17:3" },
      { text: "ÙØ¥Ù† Ø§Ù„Ø°ÙŠ Ø¨Ø¯Ø£ ÙÙŠÙƒÙ… Ø¹Ù…Ù„Ø§Ù‹ ØµØ§Ù„Ø­Ø§Ù‹ ÙŠÙÙƒÙ…Ù„Ù‡ Ø¥Ù„Ù‰ ÙŠÙˆÙ… ÙŠØ³ÙˆØ¹ Ø§Ù„Ù…Ø³ÙŠØ­.", ref: "ÙÙŠÙ„Ø¨ÙŠ 1:6" },
      { text: "Ø£Ø³ØªØ·ÙŠØ¹ ÙƒÙ„ Ø´ÙŠØ¡ ÙÙŠ Ø§Ù„Ù…Ø³ÙŠØ­ Ø§Ù„Ø°ÙŠ ÙŠÙ‚ÙˆÙŠÙ†ÙŠ.", ref: "ÙÙŠÙ„Ø¨ÙŠ 4:13" },
      { text: "Ø£Ù…Ø§ Ø§Ù„Ø°ÙŠÙ† Ù‚Ø¨Ù„ÙˆÙ‡ØŒ ÙØ£Ø¹Ø·Ø§Ù‡Ù… Ø³Ù„Ø·Ø§Ù†Ù‹Ø§ Ø£Ù† ÙŠØµÙŠØ±ÙˆØ§ Ø£ÙˆÙ„Ø§Ø¯ Ø§Ù„Ù„Ù‡.", ref: "ÙŠÙˆØ­Ù†Ø§ 1:12" },
      { text: "Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ø±ÙÙ‘Ø¨ÙÙ‘ Ù‚ÙØ±ÙÙŠØ¨ÙŒ Ù…ÙÙ†Ù’ ÙƒÙÙ„ÙÙ‘ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù ÙŠÙØ¯Ù’Ø¹ÙÙˆÙ†ÙÙ‡ÙØŒ Ù…ÙÙ†Ù’ ÙƒÙÙ„ÙÙ‘ Ø§Ù„ÙÙ‘Ø°ÙÙŠÙ†Ù ÙŠÙØ¯Ù’Ø¹ÙÙˆÙ†ÙÙ‡Ù Ø¨ÙØ§Ù„Ù’Ø­ÙÙ‚ÙÙ‘.", ref: "Ù…Ø²Ù…ÙˆØ± 145:18" },
      { text: "Ù…ÙØ­Ù’ØªÙÙ…ÙÙ„ÙÙŠÙ†Ù Ø¨ÙØ¹Ù’Ø¶ÙÙƒÙÙ…Ù’ Ø¨ÙØ¹Ù’Ø¶Ù‹Ø§ØŒ ÙˆÙÙ…ÙØ³ÙØ§Ù…ÙØ­ÙÙŠÙ†Ù Ø¨ÙØ¹Ù’Ø¶ÙÙƒÙÙ…Ù’ Ø¨ÙØ¹Ù’Ø¶Ù‹Ø§.", ref: "ÙƒÙˆÙ„ÙˆØ³ÙŠ 3:13" },
      { text: "ÙÙØ¥ÙÙ†ÙÙ‘ Ø§Ù„Ø¥ÙÙŠÙ…ÙØ§Ù†Ù Ø¨ÙØ§Ù„Ù’Ù‚ÙÙ„Ù’Ø¨Ù ÙŠÙØ¤ÙØ¯ÙÙ‘ÙŠ Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø¨ÙØ±ÙÙ‘ØŒ ÙˆÙØ§Ù„Ø§Ø¹Ù’ØªÙØ±ÙØ§ÙÙ Ø¨ÙØ§Ù„Ù’ÙÙÙ…Ù Ø¥ÙÙ„ÙÙ‰ Ø§Ù„Ù’Ø®ÙÙ„Ø§ÙØµÙ.", ref: "Ø±ÙˆÙ…ÙŠØ© 10:10" },
      { text: "ÙˆÙØ¥ÙÙ†Ù’ ÙƒÙØ§Ù†Ù Ù„ÙÙŠ ÙƒÙÙ„ÙÙ‘ Ø§Ù„Ø¥ÙÙŠÙ…ÙØ§Ù†Ù Ø­ÙØªÙÙ‘Ù‰ Ø£ÙÙ†Ù’Ù‚ÙÙ„Ù Ø§Ù„Ù’Ø¬ÙØ¨ÙØ§Ù„ÙØŒ ÙˆÙÙ„ÙÙƒÙÙ†Ù’ Ù„ÙÙŠÙ’Ø³Ù Ù„ÙÙŠ Ù…ÙØ­ÙØ¨ÙÙ‘Ø©ÙŒØŒ ÙÙÙ„ÙØ³Ù’ØªÙ Ø´ÙÙŠÙ’Ø¦Ù‹Ø§.", ref: "1 ÙƒÙˆØ±Ù†Ø«ÙˆØ³ 13:2" }
    ];

    let currentVerseIndex = 0;
    let isDarkMode = false;
    const verseTextEl = document.getElementById('verse-text');
    const verseRefEl = document.getElementById('verse-ref');
    const nextBtn = document.getElementById('next-btn');
    const lightBtn = document.getElementById('light-btn');
    const darkBtn = document.getElementById('dark-btn');
    const body = document.body;

    // Resize text to fit container without cutting words
    function fitTextToContainer() {
      const container = document.querySelector('.verse-container');
      const textEl = verseTextEl;
      const refEl = verseRefEl;
      
      // Reset to base size
      textEl.style.fontSize = '20px';
      
      // Get available height for verse text (container height minus ref height and margins)
      const containerHeight = container.clientHeight;
      const refHeight = refEl.offsetHeight;
      const availableHeight = containerHeight - refHeight - 32; // 32px for margins and spacing
      
      // Gradually reduce font size until text fits
      let fontSize = 20;
      textEl.style.fontSize = fontSize + 'px';
      
      // Use a loop to ensure full text is visible without overflow
      while (textEl.scrollHeight > availableHeight && fontSize > 12) {
        fontSize -= 0.5;
        textEl.style.fontSize = fontSize + 'px';
      }
      
      // Ensure minimum font size for readability
      if (fontSize < 12) {
        textEl.style.fontSize = '12px';
      }
    }

    function applyTheme(theme) {
      isDarkMode = theme === 'dark';
      if (isDarkMode) {
        body.classList.add('dark-mode');
        darkBtn.classList.add('active');
        lightBtn.classList.remove('active');
      } else {
        body.classList.remove('dark-mode');
        lightBtn.classList.add('active');
        darkBtn.classList.remove('active');
      }
    }

    function showVerse(index) {
      const verse = verses[index];
      verseTextEl.textContent = verse.text;
      verseRefEl.textContent = verse.ref;
      
      // Delay fitting to ensure DOM has updated
      setTimeout(fitTextToContainer, 10);
    }

    function nextVerse() {
      currentVerseIndex = (currentVerseIndex + 1) % verses.length;
      showVerse(currentVerseIndex);
    }

    // Initialize
    applyTheme('light');
    showVerse(currentVerseIndex);
    
    // Adjust on load and resize
    window.addEventListener('load', () => {
      setTimeout(fitTextToContainer, 100);
    });
    window.addEventListener('resize', fitTextToContainer);

    // Event listeners
    nextBtn.addEventListener('click', nextVerse);
    lightBtn.addEventListener('click', () => applyTheme('light'));
    darkBtn.addEventListener('click', () => applyTheme('dark'));
  </script>
</body>
</html>
